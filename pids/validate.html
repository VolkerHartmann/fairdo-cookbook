<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js navy">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Validate a PID record - FAIR DO Cookbook</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="../favicon.svg">
        
        
        <link rel="shortcut icon" href="../favicon.png">
        
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        
        <link rel="stylesheet" href="../css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="../fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
        <link rel="stylesheet" href="../hierarchical_numbered_lists.css">
        
        <link rel="stylesheet" href="../chapter_list.css">
        
        <link rel="stylesheet" href="../theme-adjustments.css">
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "navy";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('navy')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item affix "><a href="../about.html">About</a></li><li class="chapter-item affix "><a href="../pids/intro.html">Introduction to PIDs and FAIR DOs</a></li><li class="spacer"></li><li class="chapter-item "><a href="../pids/create.html">Create a PID</a></li><li class="chapter-item "><a href="../pids/resolve.html">Resolve a PID</a></li><li class="chapter-item "><a href="../pids/update.html">Update/maintain a PID</a></li><li class="chapter-item "><a href="../pids/delete.html">Delete a PID</a></li><li class="chapter-item "><a href="../pids/notify.html">Inform (or be informed) about new or changed PIDs</a></li><li class="chapter-item "><a href="../pids/search.html">Search for PIDs</a></li><li class="chapter-item expanded "><a href="../pids/validate.html" class="active">Validate a PID record</a></li><li class="chapter-item "><a href="../datatypes_intro.html">Create a Data Type</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../datatypes_step_1.html">Search data type registry for suitable data type</a></li><li class="chapter-item "><a href="../datatypes_step_2.html">Describe/model envisioned data type</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../datatypes_step_2_1.html">Decide on Data Type‘s level of detail</a></li><li class="chapter-item "><a href="../datatypes_step_2_2.html">DTR Inquiry</a></li></ol></li><li class="chapter-item "><a href="../datatypes_step_3.html">Register data type(s) in data type registry</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../datatypes_step_3_1.html">Register new Child-Data Type(s)</a></li><li class="chapter-item "><a href="../datatypes_step_3_2.html">Register extended Child-Data Type(s)</a></li><li class="chapter-item "><a href="../datatypes_step_3_3.html">Register main Data Type</a></li></ol></li></ol></li><li class="chapter-item "><a href="../kip_intro.html">Create a PID KIP</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../kip_step_1.html">Search data type registry for suitable KIP</a></li><li class="chapter-item "><a href="../kip_step_2.html">Describe/model envisioned KIP</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../kip_step_2_1.html">Call to mind basic KIP principles</a></li><li class="chapter-item "><a href="../kip_step_2_2.html">Decide on KIP contents</a></li></ol></li><li class="chapter-item "><a href="../kip_step_3.html">Register new KIP in Data Type Registry</a></li></ol></li><li class="chapter-item "><a href="../appendix/intro.html">Appendix</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../appendix/appendix_pit.html">Typed PID Maker</a></li><li class="chapter-item "><a href="../appendix/appendix_fair-do-lab.html">FAIR DO Lab</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder" class="click-transparent"></div>
                <div class="logo-header mobile-on">
    <div class="logo-spacing-general">
        <a class="logo-align-middle logo-card"
        href="https://kit.edu/"
        title="Karlsruhe Institute of Technology"
        aria-label="Visit the KIT Website">
            <img class="lightonly" src="../kit_logo_en_black.svg" alt="KIT logo">
            <img class="darkonly" src="../kit_logo_en_white.svg" alt="KIT logo">
            <img class="whiteonly" src="../kit_logo_en.svg" alt="KIT logo">
        </a>
    </div>
</div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title" title="FAIR DO Cookbook">
                        FAIR DO Cookbook
                    </h1>

                    <div class="right-buttons">
                        <div class="logo-spacing-general">
                            <a class="mobile-off logo-align-middle logo-card" href="https://kit.edu/" title="Karlsruhe Institute of Technology" aria-label="Visit the KIT Website">
                                <img class="lightonly" src="../kit_logo_en_black.svg" alt="KIT logo">
                                <img class="darkonly" src="../kit_logo_en_white.svg" alt="KIT logo">
                                <img class="whiteonly" src="../kit_logo_en.svg" alt="KIT logo">
                            </a>
                        </div>
                        
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                        <a href="https://github.com/kit-data-manager/fairdo-cookbook/" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                        

                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#validate-a-pid-record" id="validate-a-pid-record">Validate a PID record</a></h1>
<p>Validating a PID record involves many aspects.
It can vary in complexity and effort, and depend on your own idea of FAIR DOs.
This recipe covers the validation of PID records against profiles, as well as some advanced validation aspects.
It describes kinds of validation which are already implemented, as well as advanced techniques and their realizability.</p>
<p>The validation steps 1 and 2 are implemented in the <a href="../appendix/appendix_pit.html">Typed PID Maker</a>.
They are executed implicitly when creating or updating PID records, or explicitly when using the profile validation REST-interface.
The explicit validation implementation can also be used to execute the advanced step 4, which describes to validate a PID record against an arbitrary profile.
It is documented in its API documentation (OpenAPI/Swgger definition, available when service is running).</p>
<hr />
<h2><a class="header" href="#ingredients" id="ingredients">Ingredients</a></h2>
<ul>
<li>A record to validate</li>
<li>A profile to validate against</li>
</ul>
<hr />
<h2><a class="header" href="#work-steps-summary" id="work-steps-summary">Work Steps (Summary)</a></h2>
<ol>
<li>Validate if a property is indicating a profile.</li>
<li>Validate the properties of the profile.</li>
</ol>
<p>Advanced:</p>
<ol start="3">
<li>Validate if all resolvable identifiers are registered.</li>
<li>Validate the record against an external profile.</li>
</ol>
<hr />
<h2><a class="header" href="#step-1-validate-if-a-property-is-indicating-a-profile" id="step-1-validate-if-a-property-is-indicating-a-profile">Step 1: Validate if a property is indicating a profile.</a></h2>
<p>The PID record consists of key-value pairs.
One pair must indicate (at least) one profile.
The key of this pair depends on the data type registry (DTR).
In case of the ePIC DTR testing instance, this would be <a href="https://dtr-test.pidconsortium.net/#objects/21.T11148/076759916209e5d62bd5">21.T11148/076759916209e5d62bd5</a>.
Unfortunately, the ePIC DTR currently does not offer a machine-readable way to recognize the key, without knowing it in advance.
In the future, it might be possible to resolve the keys (as they are all PIDs) and recognize it from the results, or there might be only one key.</p>
<p>If this key has at least one value, this check is successful.
In the next step, the values will be further validated.</p>
<h2><a class="header" href="#step-2-validate-the-properties-of-the-profile" id="step-2-validate-the-properties-of-the-profile">Step 2: Validate the properties of the profile.</a></h2>
<p>If the following validation steps are successful, a PID record can be considered valid. If any validation fails, a record is invalid.</p>
<ol>
<li>
<p>For each mandatory property in the profile, check if the property is available in the PID record.</p>
</li>
<li>
<p>For each property in the PID record, validate all its values against the properties type in the profile.</p>
<p>This second step ensures that all properties in the given record are defined in the profile, and no &quot;loose&quot; properties exist.</p>
<p>Validation of a value is, in case of the ePIC Data Type Registry, currently possible via JSON schema.
There exist programming libraries which can validate a value against a given schema with ease.</p>
</li>
</ol>
<p>The steps 1 and 2 are considered a minimum validation. The following steps are optional extensions to this approach, which can (currently) be hard to implement in practice.</p>
<h2><a class="header" href="#validate-if-all-resolvable-identifiers-are-registered" id="validate-if-all-resolvable-identifiers-are-registered">Validate if all resolvable identifiers are registered.</a></h2>
<p>So far, we validated the profile attributes, but we still do not know (except for the profile's identifier) if other identifiers in the record are valid (registered and resolvable) or not.
Checking all of them can be hard to implement for the following reasons, which should be considered:</p>
<ul>
<li>Different kinds of identifiers exist.
To check them, you need to know how to resolve them.
Examples: Handle, DOI, ROR, ORCID, ARK, ...</li>
<li>Depending on the requirements of the property, identifiers might be given in different forms, which can make the detection and validation harder.</li>
<li>DTRs have limited functionality supporting the recognition of types with resolvable identifiers as values.
In the case on the ePIC DTR, such types usually reuse components which are known to encode PIDs in different forms.
Still, a validator still needs the knowledge about those types and how to resolve and check a PIDs existence.
We do not have FAIR DOs describing how to validate each type of PID yet.</li>
<li>While Identifiers can be understood, URL checking is limited because a valid URL might have restricted access or is not reachable temporarily.</li>
</ul>
<p>This is the way we recommend:</p>
<ol>
<li>
<p>Identify types which should contain an identifier.</p>
<p>Example: The type <a href="https://dtr-test.pidconsortium.net/#objects/21.T11148/d0773859091aeb451528">hasMetadata (21.T11148/d0773859091aeb451528)</a> consists of the basic type <a href="https://dtr-test.pidconsortium.net/#objects/21.T11148/3626040cadcac1571685">Handle-Identifier-ASCII (21.T11148/3626040cadcac1571685)</a>.
Such basic types, describing the identifier type and format, have to be known to the validator. There is, currently, no other way.
With this knowledge, a validator can search for types reusing these basic types, understanding that their values must be identifiers of some form and type.</p>
</li>
<li>
<p>For each identifier: Check if this identifier is registered.</p>
<p>The concrete way to do this depends on the identifier.
For handles, one way to do it is to check the following URL for HTTP 200 status code, after replacing the PID with the handle identifier of your choice:
<a href="https://hdl.handle.net/21.T11148/3626040cadcac1571685?noredirect=true">https://hdl.handle.net/21.T11148/3626040cadcac1571685?noredirect=true</a></p>
</li>
</ol>
<h2><a class="header" href="#validate-the-record-against-an-external-profile" id="validate-the-record-against-an-external-profile">Validate the record against an external profile.</a></h2>
<p>An &quot;external profile&quot;, in this context, is a profile which is not given in the PID record.
Validating against an external profile can be useful, for example, for institutions to check if all its registered PIDs are compliant to their set of rules.
It can be done the same way as described in step 2.
The <a href="../appendix/appendix_pit.html">Typed PID Maker</a> allows validating records against external profiles by explicitly calling the validation REST-interface, which allows to explicitly set a profile instead of using the one referenced by the PID record.</p>
<p>In this context, a binary result (valid or not valid) might be not enough.
For example, if the profile is considered to be a guideline, the result might be a score or a list of warnings or errors, and it might have different conditions for failure.
Such deviations of the steps described above is currently not available in the Typed PID Maker API.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../pids/search.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../datatypes_intro.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../pids/search.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="../datatypes_intro.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        <script>
            function updateThemeElements() {
                try {
                    var html = document.querySelector('html');
                    var theme = localStorage.getItem('mdbook-theme');
                    var white_themes = ["light"]
                    var light_themes = ["rust"]
                    var light_only_elements = html.getElementsByClassName("lightonly")
                    var dark_only_elements = html.getElementsByClassName("darkonly")
                    var white_only_elements = html.getElementsByClassName("whiteonly")
                    console.log(theme)
                    console.log(light_themes)
                    if (light_themes.includes(theme)) {
                        for (light_only of light_only_elements) {
                            light_only.classList.remove("hideme")
                        }
                        for (dark_only of dark_only_elements) {
                            dark_only.classList.add("hideme")
                        }
                        for (white_only of white_only_elements) {
                            white_only.classList.add("hideme")
                        }
                    } else if (white_themes.includes(theme)) {
                        for (light_only of light_only_elements) {
                            light_only.classList.add("hideme")
                        }
                        for (dark_only of dark_only_elements) {
                            dark_only.classList.add("hideme")
                        }
                        for (white_only of white_only_elements) {
                            white_only.classList.remove("hideme")
                        }
                    } else {
                        for (light_only of light_only_elements) {
                            light_only.classList.add("hideme")
                        }
                        for (dark_only of dark_only_elements) {
                            dark_only.classList.remove("hideme")
                        }
                        for (white_only of white_only_elements) {
                            white_only.classList.add("hideme")
                        }
                    }
                } catch (e) { }
            }
            updateThemeElements() // call it once in the beginning
            // configure to call the function when theme changes.
            // the theme is stored as a class in the html tag, so we observe changes in this tag.
            var themeStorage = document.querySelector('html');
            const config = { attributes: true, childList: false, subtree: false };
            const callback = function(mutationsList, observer) {updateThemeElements()}
            const observer = new MutationObserver(callback);
            observer.observe(themeStorage, config);
        </script>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
