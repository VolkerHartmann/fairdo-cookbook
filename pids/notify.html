<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js navy">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Inform other systems about changes among your PIDs - FAIR DO Cookbook</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="../favicon.svg">
        
        
        <link rel="shortcut icon" href="../favicon.png">
        
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        
        <link rel="stylesheet" href="../css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="../fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
        <link rel="stylesheet" href="../hierarchical_numbered_lists.css">
        
        <link rel="stylesheet" href="../chapter_list.css">
        
        <link rel="stylesheet" href="../theme-adjustments.css">
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "navy";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('navy')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item affix "><a href="../about.html">About</a></li><li class="chapter-item "><a href="../pids/intro.html">Working with PIDs</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../pids/create.html">Create a PID</a></li><li class="chapter-item "><a href="../pids/resolve.html">Resolve a PID</a></li><li class="chapter-item "><a href="../pids/update.html">Update/maintain a PID</a></li><li class="chapter-item "><a href="../pids/delete.html">Delete a PID</a></li></ol></li><li class="chapter-item expanded "><a href="../pids/notify.html" class="active">Inform other systems about changes among your PIDs</a></li><li class="chapter-item "><a href="../pids/search.html">Search PIDs using record information</a></li><li class="chapter-item "><a href="../datatypes_intro.html">Create a Data Type</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../datatypes_step_1.html">Search data type registry for suitable data type</a></li><li class="chapter-item "><a href="../datatypes_step_2.html">Describe/model envisioned data type</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../datatypes_step_2_1.html">Decide on Data Type‘s level of detail</a></li><li class="chapter-item "><a href="../datatypes_step_2_2.html">DTR Inquiry</a></li></ol></li><li class="chapter-item "><a href="../datatypes_step_3.html">Register data type(s) in data type registry</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../datatypes_step_3_1.html">Register new Child-Data Type(s)</a></li><li class="chapter-item "><a href="../datatypes_step_3_2.html">Register extended Child-Data Type(s)</a></li><li class="chapter-item "><a href="../datatypes_step_3_3.html">Register main Data Type</a></li></ol></li></ol></li><li class="chapter-item "><a href="../kip_intro.html">Create a PID KIP</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../kip_step_1.html">Search data type registry for suitable KIP</a></li><li class="chapter-item "><a href="../kip_step_2.html">Describe/model envisioned KIP</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../kip_step_2_1.html">Call to mind basic KIP principles</a></li><li class="chapter-item "><a href="../kip_step_2_2.html">Decide on KIP contents</a></li></ol></li><li class="chapter-item "><a href="../kip_step_3.html">Register new KIP in Data Type Registry</a></li></ol></li><li class="chapter-item "><a href="../appendix/intro.html">Appendix</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../appendix/appendix_pit.html">PID Information Types service</a></li><li class="chapter-item "><a href="../appendix/appendix_testbed.html">FAIR DO Ecosystem Testbed</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder" class="click-transparent"></div>
                <div class="logo-header mobile-on">
    <div class="logo-spacing-general">
        <a class="logo-align-middle logo-card"
        href="https://kit.edu/"
        title="Karlsruhe Institute of Technology"
        aria-label="Visit the KIT Website">
            <img class="lightonly" src="../kit_logo_en_black.svg" alt="KIT logo">
            <img class="darkonly" src="../kit_logo_en_white.svg" alt="KIT logo">
            <img class="whiteonly" src="../kit_logo_en.svg" alt="KIT logo">
        </a>
    </div>
</div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title" title="FAIR DO Cookbook">
                        FAIR DO Cookbook
                    </h1>

                    <div class="right-buttons">
                        <div class="logo-spacing-general">
                            <a class="mobile-off logo-align-middle logo-card" href="https://kit.edu/" title="Karlsruhe Institute of Technology" aria-label="Visit the KIT Website">
                                <img class="lightonly" src="../kit_logo_en_black.svg" alt="KIT logo">
                                <img class="darkonly" src="../kit_logo_en_white.svg" alt="KIT logo">
                                <img class="whiteonly" src="../kit_logo_en.svg" alt="KIT logo">
                            </a>
                        </div>
                        
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                        <a href="https://github.com/kit-data-manager/fairdo-cookbook/" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                        

                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#inform-other-systems-about-changes-among-your-pids" id="inform-other-systems-about-changes-among-your-pids">Inform other systems about changes among your PIDs</a></h1>
<p>If a PID has been created or a record has been updated, there might be the need to notify other services about this event. These might be internal or external services to be notified, depending on the use case. Examples are library systems, catalogues, search indices or backup systems. The receiving services could also be bridges to other technologies, like RSS feeds of data publications of a certain kind or other user oriented technologies. Bridging services might also help to close gaps if underlying technologies like TCP/IP change at some point of time.</p>
<p><img src="../images/testbed_notify.png" alt="The PIT service will notify the message broker, which will distribute the message among its subscribers." /></p>
<p>This recipe shows the steps needed to notify a service.</p>
<hr />
<h2><a class="header" href="#ingredients" id="ingredients">Ingredients</a></h2>
<ul>
<li>A message broker instance, AMQP compatible</li>
<li>Access to a <a href="../appendix/appendix_pit.html">PID Information Types Service</a> configured to use the message broker instance</li>
<li>A service that should be notified, implementing the AMQP protocol</li>
</ul>
<p>Alternatively, for testing/experimentation purposes, you can use a <a href="../appendix/appendix_testbed.html">testbed</a> instance, which comes with pre-configured with these ingredients and can be run using docker on your local machine.</p>
<hr />
<h2><a class="header" href="#work-steps-summary" id="work-steps-summary">Work Steps (Summary)</a></h2>
<p>As soon as the PID information types service is configured to use the message broker, everything happens in the background. These steps show you how to visualize what happens hidden in the background, when using the testbed.</p>
<ol>
<li>Run the service that should be notified and register it at the message broker.</li>
<li>Do any <a href="./create.html">create</a> or <a href="./update.html">update</a> operation on the PID information types service.</li>
<li>Use the management interface to see the messaging process happening within the message broker.</li>
<li>View the result of your service.</li>
</ol>
<hr />
<h2><a class="header" href="#step1-run-the-service-that-should-be-notified-and-register-it-at-the-message-broker" id="step1-run-the-service-that-should-be-notified-and-register-it-at-the-message-broker">Step1: Run the service that should be notified and register it at the message broker</a></h2>
<p>The <a href="../appendix/appendix_testbed.html">testbed</a> implements the messaging principle using a message broker<sup class="footnote-reference"><a href="#messagebroker">1</a></sup>. It is a flexible approach that also enables federation and peering. The PIT service instance is by default configured to notify this service about create or update operations using a message. The message only contains a topic string and the PID this message is about. Services need to register in beforehand at the message broker for certain topics in order to receive those messages. It is up to the services what to do with the PID inside. The idea is to use the machine actionability of FAIR Digital Objects to enable services to decide themselves how to handle the received PID and information and data that can be reached by it.</p>
<p>If you use a testbed instance with its default configuration, you can skip this step. It already comes with an indexing service running in the background. If you use your own service, register for all topics beginning with &quot;record.*&quot;.</p>
<div class="footnote-definition" id="messagebroker"><sup class="footnote-definition-label">1</sup>
<p>Currently, RabbitMQ is used as a message broker. It implements the „Advanced Message Queuing Protocol“ (AMQP) <a href="https://www.rabbitmq.com/">https://www.rabbitmq.com/</a></p>
</div>
<h2><a class="header" href="#step-2-do-any-create-or-update-operation-on-the-pid-information-types-service" id="step-2-do-any-create-or-update-operation-on-the-pid-information-types-service">Step 2: Do any create or update operation on the PID information types service</a></h2>
<p>Follow one of the following recipes to trigger a notification:</p>
<ol>
<li><a href="./create.html">Create a PID</a></li>
<li><a href="./update.html">Update a PID</a></li>
</ol>
<p>Both actions trigger notifications. Notifications are currently very small. They simply contain a topic string and a PID, which the receiver may resolve and decide how to act on it. A create event notification might contain the topic &quot;record.create&quot;, while an update event notification might have the topic &quot;record.update&quot;.</p>
<h2><a class="header" href="#step-3-use-the-management-interface-to-see-the-messaging-process-happening-within-the-message-broker" id="step-3-use-the-management-interface-to-see-the-messaging-process-happening-within-the-message-broker">Step 3: Use the management interface to see the messaging process happening within the message broker</a></h2>
<p>Using the testbed, you can access a management interface within your browser, using the following credentials:</p>
<ul>
<li>URL: <a href="http://localhost:15672/">http://localhost:15672/</a></li>
<li>Username: guest</li>
<li>Password: guest</li>
</ul>
<p>On the first page in the dashboard, you should see something like this graph:</p>
<p><img src="../images/testbed_messagebroker_activity-peak.png" alt="The messagebroker dashboard shows a peak, indicating a single incoming message." /></p>
<p>It indicates an incoming message. Feel free to also explore the exchange and queues in the interface. If you used your own message broker, the interface might look different.</p>
<h2><a class="header" href="#step-4-view-the-result-of-your-service" id="step-4-view-the-result-of-your-service">Step 4: View the result of your service</a></h2>
<p>If you use the testbed, see if your action is represented in the contained search index. You can read about how to access in the <a href="./search.html">search recipe</a>. If you use your own service, check if it acted as expected.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../pids/delete.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../pids/search.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../pids/delete.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="../pids/search.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        <script>
            function updateThemeElements() {
                try {
                    var html = document.querySelector('html');
                    var theme = localStorage.getItem('mdbook-theme');
                    var white_themes = ["light"]
                    var light_themes = ["rust"]
                    var light_only_elements = html.getElementsByClassName("lightonly")
                    var dark_only_elements = html.getElementsByClassName("darkonly")
                    var white_only_elements = html.getElementsByClassName("whiteonly")
                    console.log(theme)
                    console.log(light_themes)
                    if (light_themes.includes(theme)) {
                        for (light_only of light_only_elements) {
                            light_only.classList.remove("hideme")
                        }
                        for (dark_only of dark_only_elements) {
                            dark_only.classList.add("hideme")
                        }
                        for (white_only of white_only_elements) {
                            white_only.classList.add("hideme")
                        }
                    } else if (white_themes.includes(theme)) {
                        for (light_only of light_only_elements) {
                            light_only.classList.add("hideme")
                        }
                        for (dark_only of dark_only_elements) {
                            dark_only.classList.add("hideme")
                        }
                        for (white_only of white_only_elements) {
                            white_only.classList.remove("hideme")
                        }
                    } else {
                        for (light_only of light_only_elements) {
                            light_only.classList.add("hideme")
                        }
                        for (dark_only of dark_only_elements) {
                            dark_only.classList.remove("hideme")
                        }
                        for (white_only of white_only_elements) {
                            white_only.classList.add("hideme")
                        }
                    }
                } catch (e) { }
            }
            updateThemeElements() // call it once in the beginning
            // configure to call the function when theme changes.
            // the theme is stored as a class in the html tag, so we observe changes in this tag.
            var themeStorage = document.querySelector('html');
            const config = { attributes: true, childList: false, subtree: false };
            const callback = function(mutationsList, observer) {updateThemeElements()}
            const observer = new MutationObserver(callback);
            observer.observe(themeStorage, config);
        </script>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
